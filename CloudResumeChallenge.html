<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Andrew DeFever | Cloud Resume</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <!-- Leaflet core CSS/JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- MarkerCluster & Heatmap plugins -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"/>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

  <style>
    :root{
      --bg: #071f2a;
      --card-bg: rgba(8, 28, 40, 0.6);
      --card-border: rgba(255,255,255,0.12);
      --text: #e6f3ff;
      --muted: #b6ccdb;
      --accent: #47b3ff;
      --accent-2:#90e0ff;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --maxw: 1100px;
    }
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      color: var(--text);
      background: var(--bg) url('background.png') center/cover no-repeat fixed;
      min-height: 100dvh;
    }
    /* overlay for readability */
    body::before{
      content:"";
      position:fixed; inset:0;
      background: radial-gradient(1200px 600px at 80% -10%, rgba(71,179,255,.22), transparent 60%),
                  linear-gradient(to bottom, rgba(4,11,16,.75), rgba(4,11,16,.35) 25%, rgba(4,11,16,.85));
      pointer-events:none;
      z-index:-1;
    }

    /* Skip link */
    .skip { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    .skip:focus { left: 1rem; top: 1rem; width: auto; height: auto; background: #000; color:#fff; padding:.5rem .75rem; border-radius:.5rem; }

    /* Nav */
    nav {
      position: sticky; top:0; z-index: 20;
      backdrop-filter: saturate(140%) blur(8px);
      background: rgba(5,18,26,.65);
      border-bottom: 1px solid var(--card-border);
    }
    .nav-inner{
      display: flex; align-items:center; justify-content: space-between;
      max-width: var(--maxw); margin:0 auto; padding: .8rem 1rem;
    }
    .brand{ display:flex; gap:.6rem; align-items:center; font-weight:800; letter-spacing:.3px;}
    .brand i{ font-size:1.2rem; color: var(--accent-2); }
    .brand span{ font-family: Orbitron, sans-serif;}
    .nav-links a{
      color: var(--muted); text-decoration:none; margin-left:1rem; font-weight:600; font-size:.95rem;
    }
    .nav-links a:hover{ color: var(--text); }

    /* Layout */
    .container{ max-width: var(--maxw); margin: 0 auto; padding: 2rem 1rem; }
    section{ margin: 2rem 0; }
    .card{
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.2rem;
    }
    .grid{ display:grid; gap:1rem; }
    @media (min-width: 900px){
      .grid-2{ grid-template-columns: 1.1fr .9fr; }
      .grid-3{ grid-template-columns: repeat(3,1fr); }
    }

    /* Hero */
    .hero{ padding: 3.5rem 1rem 2rem; text-align: center; }
    .hero .title{
      font-family: Orbitron, sans-serif; font-weight: 600; font-size: clamp(2rem, 4vw + .5rem, 3.2rem);
      margin: 0 0 .4rem;
      letter-spacing:.6px;
      text-shadow: 0 6px 28px rgba(0,0,0,.45);
    }
    .hero .tag{ color: var(--muted); margin: 0 0 1.2rem; font-size: 1.05rem; }
    .cta{
      display:flex; gap:.7rem; justify-content:center; flex-wrap: wrap;
    }
    .btn{
      display:inline-flex; align-items:center; gap:.5rem;
      padding:.7rem 1rem; border-radius: 999px; text-decoration:none; font-weight:700; border:1px solid var(--card-border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.12); border-color: rgba(255,255,255,.28); }
    .btn i{ opacity:.9; }

    h2{ font-family: Orbitron, sans-serif; font-weight:600; font-size:1.4rem; margin:.2rem 0 1rem; }
    ul{ margin:0; padding-left:1.1rem; }
    li{ margin:.35rem 0; line-height:1.5; }

    /* Map & legend */
    #map{ height: 460px; border-radius: var(--radius); border: 1px solid var(--card-border); overflow: hidden; }
    .legend {
      position: absolute; bottom: 16px; right: 16px;
      background: rgba(0,0,0,.65);
      color:#fff; padding: .5rem .7rem; font-size:.85rem; border-radius:.5rem; box-shadow: var(--shadow);
    }
    .legend span{ display:inline-block; width:12px; height:12px; margin-right:6px; vertical-align:middle; }

    /* Lists */
    .meta{ color: var(--muted); font-size:.95rem; }
    .badges img{ height:72px; margin-right:.6rem; border-radius: 8px; border: 1px solid var(--card-border); background: rgba(255,255,255,.05); }

    /* Footer */
    footer{ color: var(--muted); text-align:center; padding: 2rem 1rem 3rem; font-size:.9rem; }
    .divider{ height:1px; background: var(--card-border); margin: 2rem 0; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      html { scroll-behavior: auto; }
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <a class="skip" href="#main">Skip to content</a>

  <nav>
    <div class="nav-inner">
      <div class="brand"><i class="fa-solid fa-cloud"></i><span>Andrew DeFever</span></div>
      <div class="nav-links">
        <a href="#about">About</a>
        <a href="#certs">Certs</a>
        <a href="#skills">Skills</a>
        <a href="#projects">Projects</a>
        <a href="#experience">Experience</a>
        <a href="#education">Education</a>
        <a href="#visitors">Visitors</a>
      </div>
    </div>
  </nav>

  <header class="hero">
    <div class="container">
      <h1 class="title">Cloud Resume Challenge</h1>
      <p class="tag">AWS Certified • Networking & Security • Serverless tinkerer</p>
      <div class="cta">
        <a class="btn" href="mailto:AndrewDeFever@gmail.com"><i class="fa-solid fa-envelope"></i>Email</a>
        <a class="btn" href="https://github.com/AndrewDeFever" target="_blank" rel="noreferrer"><i class="fa-brands fa-github"></i>GitHub</a>
        <a class="btn" href="https://www.linkedin.com/in/andrewdefever/" target="_blank" rel="noreferrer"><i class="fa-brands fa-linkedin"></i>LinkedIn</a>
        <a class="btn" href="./CloudResumeChallenge/Andrew-DeFever-Resume-2025-AWS.docx" download><i class="fa-solid fa-file-arrow-down"></i>Resume</a>
      </div>
    </div>
  </header>

  <main id="main" class="container">
    <section id="about" class="card">
      <h2>About This Site</h2>
      <p class="meta">Built as part of the <strong>Cloud Resume Challenge</strong>. Deployed with a simple AWS serverless stack and CI/CD.</p>
      <div class="grid grid-2">
        <ul>
          <li>Static hosting on <strong>Amazon S3</strong> with <strong>CloudFront</strong> CDN</li>
          <li><strong>API Gateway</strong> + <strong>Lambda (Python)</strong> for visit tracking</li>
          <li>Visitor logs stored in <strong>DynamoDB</strong></li>
          <li>OIDC GitHub Actions deploy (S3 sync + CloudFront invalidation)</li>
        </ul>
        <div class="card" style="background:rgba(255,255,255,.04)">
          <p class="meta">Repo & pipelines</p>
          <ul>
            <li><a href="https://github.com/AndrewDeFever/CloudResumeChallenge" target="_blank" rel="noreferrer">View the GitHub repository</a></li>
            <li>Least-privilege IAM for CI (OIDC) with CloudFront invalidation</li>
            <li>Lambda packaged with external deps and env vars (no secrets in code)</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="certs" class="card">
      <h2>Certifications</h2>
      <div class="badges" aria-label="Certification badges">
        <a href="./CloudResumeChallenge/AWS-Certified-Cloud-Practitioner-certificate.pdf" target="_blank" rel="noreferrer">
          <img src="./CloudResumeChallenge/aws-certified-cloud-practitioner.png" alt="AWS Certified Cloud Practitioner badge">
        </a>
        <a href="./CloudResumeChallenge/CompTIA-Security-plus-Certification.pdf" target="_blank" rel="noreferrer">
          <img src="./CloudResumeChallenge/comptia-security-ce-certification.png" alt="CompTIA Security+ CE badge">
        </a>
      </div>
      <ul>
        <li>AWS Certified Cloud Practitioner — Jul 15, 2025</li>
        <li>CompTIA Security+ (SY0-701) — Jun 17, 2025</li>
      </ul>
    </section>

    <section id="skills" class="card">
      <h2>Technical Skills</h2>
      <ul>
        <li><strong>AWS:</strong> S3, CloudFront, Route 53, IAM, ACM/TLS, DynamoDB, API Gateway, Lambda</li>
        <li><strong>Networking:</strong> IP/Ethernet, BGP, MPLS, IPVPN, E-Line, VPLS, VLANs, firewall policy, DNS (BIND)</li>
        <li><strong>Systems:</strong> Linux CLI, sysadmin, SNMP monitoring, Netcool, Cacti, SolarWinds, Infinera, Cisco IOS/NX-OS, JunOS</li>
        <li><strong>Security:</strong> Security+; DDoS mitigation (RADware), IAM best practices, secure routing via GRE tunneling</li>
      </ul>
    </section>

    <section id="projects" class="card">
      <h2>Projects</h2>
      <ul>
        <li><strong>Cloud Resume Challenge</strong> — S3 + CloudFront resume site; visitor tracker via API Gateway, Lambda (Python), DynamoDB; packaged Lambda with external dependencies and deployed via GitHub Actions OIDC.</li>
      </ul>
    </section>

    <section id="experience" class="card">
      <h2>Experience</h2>
      <ul>
        <li><strong>Systems Analyst II — ONEGas</strong> (Nov 2021 – Present)<br>
          Monitor, support, and troubleshoot applications/connectivity across business systems; drive operational readiness with cross‑functional teams; coordinate with vendors to maintain reliability.</li>
        <li><strong>Lead IP/Ethernet NCC Technician — Zayo</strong> (Apr 2016 – Feb 2018)<br>
          Advanced troubleshooting across national IP/Ethernet networks; configured Juniper/Cisco/ALU gear and DDoS platforms; mentored Tier 1/2 teams to improve MTTR.</li>
        <li><strong>IP/Ethernet NCC Technician — Zayo</strong> (Nov 2014 – Apr 2016)<br>
          Resolved faults across IP VPN, VPLS, E‑Line; performed RFC 2544 testing; tuned BGP policies and DNS; monitored with Netcool/Cacti; direct customer communications.</li>
        <li><strong>Lead Infrastructure NCC Technician — Zayo</strong> (Dec 2012 – Nov 2014)<br>
          Led dark-fiber troubleshooting; monitored environmental alerts; platforms: Infinera, Fujitsu, Nortel, Dantel, Cisco, NetGuardian, JDSU, SolarWinds.</li>
      </ul>
    </section>

    <section id="education" class="card">
      <h2>Education</h2>
      <ul>
        <li><strong>B.A. Psychology</strong>, Minor in Philosophy — May 2012</li>
      </ul>
    </section>

    <div class="divider"></div>

    <section id="visitors" class="grid grid-2">
      <div class="card">
        <h2>Visitor Map</h2>
        <div id="map" role="img" aria-label="World map of recent visitors"></div>
      </div>
      <div class="card">
        <h2>Recent Visitors</h2>
        <p id="visit-count" class="meta">Visits: loading…</p>
        <ul id="visitor-list" aria-live="polite"></ul>
      </div>
    </section>
  </main>

  <footer class="container">
    <div>© <span id="y"></span> Andrew DeFever — Built on AWS. Be nice to S3 and it’ll be nice to you.</div>
  </footer>

  <!-- Log visit -->
  <script>
    fetch("https://njx3tbb522.execute-api.us-east-1.amazonaws.com/track", { method: "POST" });
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>

  <!-- Map + clustering + heat + legend -->
  <script>
    // Canvas2D patch to prefer willReadFrequently for some browsers
    (function() {
      const orig = HTMLCanvasElement.prototype.getContext;
      HTMLCanvasElement.prototype.getContext = function(type, opts) {
        if (type === '2d') return orig.call(this, '2d', { willReadFrequently: true });
        return orig.call(this, type, opts);
      };
    })();

    const API_URL = "https://lkqaj47w3b.execute-api.us-east-1.amazonaws.com/ReadGeoCoords";

    function getFlagEmoji(cc) {
      if (!cc) return "🌐";
      return [...cc.toUpperCase()].map(c => String.fromCodePoint(127397 + c.charCodeAt())).join("");
    }

    const ispIconMap = { "Google": "fab fa-google", "Cox": "fas fa-globe-americas" };
    function getISPIcon(org = "") {
      const m = Object.keys(ispIconMap).find(k => org.includes(k));
      return m ? `<i class="${ispIconMap[m]}"></i>` : '<i class="fas fa-globe"></i>';
    }

    fetch(API_URL)
      .then(r => r.json())
      .then(data => {
        if (!Array.isArray(data)) {
          console.error("Expected array, got:", data);
          document.getElementById("visit-count").textContent = "Visits: unavailable";
          return;
        }

        document.getElementById("visit-count").textContent = `Visits: ${data.length}`;
        data.sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp));

        const listEl = document.getElementById("visitor-list");
        listEl.innerHTML = "";
        data.slice(0, 6).forEach(item => {
          const li = document.createElement("li");
          li.innerHTML = `${getFlagEmoji(item.country)} <strong>${item.city}, ${item.region}</strong> — ${getISPIcon(item.org)} <em>${item.org}</em>`;
          listEl.appendChild(li);
        });

        const map = L.map("map").setView([20, 0], 2);
        L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png", {
          attribution: "© CARTO & © OpenStreetMap contributors",
          maxZoom: 18
        }).addTo(map);

        const markers = L.markerClusterGroup();
        const heatData = [];
        data.forEach(v => {
          const latlng = [v.lat, v.lng];
          markers.addLayer(L.marker(latlng).bindPopup(`<strong>${v.city}</strong><br>${v.org}<br>${v.timestamp}`));
          heatData.push([...latlng, .5]);
        });
        map.addLayer(markers);
        L.heatLayer(heatData, { radius: 25 }).addTo(map);

        map.fitBounds(L.latLngBounds(data.map(d => [d.lat, d.lng])), { padding: [40, 40] });

        const legend = L.control({ position: 'bottomright' });
        legend.onAdd = () => {
          const div = L.DomUtil.create('div', 'legend');
          div.innerHTML = `<strong>Legend</strong><br>
            <span style="background:#3388ff;border-radius:50%;"></span> Visitors<br>
            <span style="background:rgba(255,0,0,0.5);"></span> Heat intensity`;
          return div;
        };
        legend.addTo(map);
      })
      .catch(err => {
        console.error("ReadGeoCoords error:", err);
        document.getElementById("visit-count").textContent = "Visits: unavailable";
      });
  </script>
</body>
</html>
